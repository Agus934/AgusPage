{"version":3,"file":"form.js","mappings":"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","sources":["webpack://agustinagordillo-seguros-web/./src/js/form.js"],"sourcesContent":["window.modal_state = Object.seal({\n    modal: undefined,\n});\n\n/*-\nmodal_container_click :: (MouseEvent) -> undefined\n*/\nfunction modal_container_click(e) {\n    if (e.target.id === \"modal\") {\n        const modal_container = e.target;\n        const modal = document.getElementById(`${window.modal_state.modal}-modal`);\n        modal.classList.add(\"display-none\");\n        modal_container.classList.add(\"display-none\");\n        window.modal_state.modal = undefined;\n    }\n}\n\n/*-\nsetModalStatus :: (\"error\" | \"loading\" | \"success\") -> undefined\n*/\nfunction setModalStatus(string) {\n    const current_key_modal = window.modal_state.modal;\n    const modal = document.getElementById(`${string}-modal`);\n    const modal_container = document.getElementById(\"modal\");\n    const current_modal = (\n        current_key_modal === undefined\n        ? undefined\n        : document.getElementById(`${current_key_modal}-modal`)\n    );\n\n    modal_container.classList.remove(\"display-none\");\n    modal?.classList?.toggle(\"display-none\");\n    current_modal?.classList?.toggle(\"display-none\");\n    window.modal_state.modal = string;\n\n    if (string !== \"loading\") {\n        modal_container.addEventListener(\"click\", modal_container_click, {once: true});\n    }\n}\n\n/*-\ncreateSendMessage :: (HTMLFormElement, \"email\" | \"whatsapp\") -> string\n*/\nfunction createSendMessage(form, type) {\n    const product = (\n        form.id === \"otros-form\"\n        ? form?.seguro?.value\n        : String(form.dataset.name)\n    );\n    if (type === \"email\") {\n        const obj = Object.fromEntries((new FormData(form)).entries());\n        obj._subject = (\n            form.id === 'Contacto'\n            ? `Consulta por parte de ${window.location.href}:`\n            : `Cotizar seguro de ${product}, por parte de ${form.nombre.value} ${form.apellido.value}`\n        );\n        obj._captcha = true;\n        obj._template = 'table';\n        return obj;\n    }\n    if (type === \"whatsapp\") {\n        let str = 'Hola,%20me%20comunico%20para%20consultarle%20la%20siguiente%20cotizaciÃ³n%0a%0a';\n        str += `*_Asunto:*%20Cotizar%20seguro%20de%20${product}%0a`;\n        str += `*De:*%20${form.nombre.value}%20${form.apellido.value}%0a%0a`;\n\n        [...(new FormData(form)).entries()].forEach(function (key_val) {\n            str += `*${key_val[0]}:*%20${key_val[1]}%0a`;\n        });\n        return str;\n    }\n}\n\n//ASSERT FUNCTIONS\n/*-\nisEmpty :: (string) -> boolean\n*/\nfunction isEmpty(string) {\n    return string === \"\";\n}\n\n/*-\nisDNIOk :: (string) -> boolean\n*/\nfunction isDNIOk(string) {\n    return /^\\d{6,8}$/.test(string);\n}\n\n/*-\nisTelOk :: (string) -> boolean\n*/\nfunction isTelOk(string) {\n    const reg1 = /^11[ -]?\\d{8}$/;\n    const reg2 = /^(?:220|221|223|230|236|237|249|260|261|263|264|266|280|291|294|297|298|299|336|341|342|343|345|348|351|353|358|362|364|370|376|379|380|381|383|385|387|388)[ -]?\\d{7}$/;\n    const reg3 = /^(?:2202|2221|2223|2224|2225|2226|2227|2229|2241|2242|2243|2244|2245|2246|2252|2254|2255|2257|2261|2262|2264|2265|2266|2267|2268|2271|2272|2273|2274|2281|2283|2284|2285|2286|2291|2292|2296|2297|2302|2314|2316|2317|2320|2323|2324|2325|2326|2331|2333|2334|2335|2336|2337|2338|2342|2343|2344|2345|2346|2352|2353|2354|2355|2356|2357|2358|2392|2393|2394|2395|2396|2473|2474|2475|2477|2478|2622|2624|2625|2626|2646|2647|2648|2651|2655|2656|2657|2658|2901|2902|2903|2920|2921|2922|2923|2924|2925|2926|2927|2928|2929|2931|2932|2933|2934|2935|2936|2940|2942|2945|2946|2948|2952|2953|2954|2962|2963|2964|2966|2972|2982|2983|3327|3329|3382|3385|3387|3388|3400|3401|3402|3404|3405|3406|3407|3408|3409|3435|3436|3437|3438|3442|3444|3445|3446|3447|3454|3455|3456|3458|3460|3462|3463|3464|3465|3466|3467|3468|3469|3471|3472|3476|3482|3483|3487|3489|3491|3492|3493|3496|3497|3498|3521|3522|3524|3525|3532|3533|3537|3541|3542|3543|3544|3546|3547|3548|3549|3562|3563|3564|3571|3572|3573|3574|3575|3576|3582|3583|3584|3585|3711|3715|3716|3718|3721|3725|3731|3734|3735|3741|3743|3751|3754|3755|3756|3757|3758|3772|3773|3774|3775|3777|3781|3782|3786|3821|3825|3826|3827|3832|3835|3837|3838|3841|3843|3844|3845|3846|3854|3855|3856|3857|3858|3861|3862|3863|3865|3867|3868|3869|3873|3876|3877|3878|3885|3886|3887|3888|3891|3892|3894)[ -]?\\d{6}$/;\n    return (\n        reg1.test(string) \n        || reg2.test(string) \n        || reg3.test(string) \n    );\n}\n\n/*-\nisCodigoPostalOk :: (string) -> boolean\n*/\nfunction isCodigoPostalOk(string) {\n    return /^[a-zA-Z]?\\d{4}$/.test(string);\n} \n\n/*-\nisEmailOk :: (string) -> boolean\n*/\nfunction isEmailOk(string) {\n    const reg = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return reg.test(string);\n}\n\n//EVENTS FUNCIONS\n\n/*-\nDNI_oninput :: (Event) -> undefined\n*/\nfunction DNI_oninput(e) {\n    const input = e.target;\n    if (isDNIOk(input.value)) {\n        const item = input.parentElement.parentElement.parentElement;\n        item.classList.remove(\"is-invalid\");\n        input.oninput = null;\n    }\n}\n\n/*-\ntel_oninput :: (Event) -> undefined\n*/\nfunction tel_oninput(e) {\n    const input = e.target;\n    if (isTelOk(input.value)) {\n        const item = input.parentElement.parentElement.parentElement;\n        item.classList.remove(\"is-invalid\");\n        input.oninput = null;\n    }\n}\n\n/*-\ncodigoPostal_oninput :: (Event) -> undefined\n*/\nfunction codigoPostal_oninput(e) {\n    const input = e.target;\n    if (isCodigoPostalOk(input.value)) {\n        const item = input.parentElement.parentElement.parentElement;\n        item.classList.remove(\"is-invalid\");\n        input.oninput = null;\n    }\n}\n\n/*-\nemail_oninput :: (Event) -> undefined\n*/\nfunction email_oninput(e) {\n    const input = e.target;\n    if (isEmailOk(input.value)) {\n        const item = input.parentElement.parentElement.parentElement;\n        item.classList.remove(\"is-invalid\");\n        input.oninput = null;\n    }\n}\n\n/*-\nempty_oninput :: (Event) -> undefined\n*/\nfunction empty_oninput(e) {\n    const input = e.target;\n    if (!isEmpty(input.value)) {\n        const item = input.parentElement.parentElement.parentElement;\n        item.classList.remove(\"is-invalid\");\n        input.oninput = null;\n    }\n}\n\n/*-\nisRequired :: (HTMLInputElement) -> boolean\n*/\nfunction isRequired(input) {\n    if (input.name === \"dni\" \n        && !isDNIOk(input.value)\n    ) {\n        input.oninput = DNI_oninput;\n        return true;\n    }\n    if (input.name === \"tel\" \n        && !isTelOk(input.value)\n    ) {\n        input.oninput = tel_oninput;\n        return true;\n    }\n    if (input.name === \"codigo_postal\" \n        && !isCodigoPostalOk(input.value)\n    ) {\n        input.oninput = codigoPostal_oninput;\n        return true;\n    }\n    if (input.name === \"email\"\n        && !isEmailOk(input.value)\n    ) {\n        input.oninput = email_oninput;\n        return true;\n    }\n    if (isEmpty(input.value)) {\n        input.oninput = empty_oninput;\n        return true;\n    }\n    return false;\n}\n\nfunction canSend(form) {\n    const required = form.querySelectorAll(\".left_p\");\n    let send = true; \n    required.forEach(function (item, i) {\n        const required_input = item.querySelector(\".input\");\n        if (isRequired(required_input)) {\n            if (send) {\n                send = false;\n            }\n            item.classList.add(\"is-invalid\");\n        }\n    });\n    return send;\n}\n\n/*-\nhandleSubmit :: (SubmitEvent) -> undefined\n*/\nfunction handleSubmit(e) {\n    const form = e.currentTarget.form;\n    if (canSend(form)) {\n        setModalStatus(\"success\");\n        fetch(\"https://formsubmit.co/ajax/axel.a.sar.97@gmail.com\", {\n            method: \"POST\",\n            headers: { \n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n            },\n            body: JSON.stringify(createSendMessage(form, \"email\"))\n        }).then(function (response) {\n            return response.json();\n        }).then(function (data) {\n            if (data.success === \"true\") {\n                setModalStatus(\"success\");\n                return;\n            } else {\n                return Promise.reject(data);\n            }\n        }).catch(function () {\n            setModalStatus(\"error\");\n        });\n    \n       form.reset();\n    }\n}\n\n/*-\nhandleAPIWhatsapp :: (MouseEvent) -> undefined\n*/\nfunction handleAPIWhatsapp(e) {\n    const form = e.currentTarget.form;\n    if (canSend(form)) {\n        const message = createSendMessage(form, \"whatsapp\");\n        const url = `https://api.whatsapp.com/send/?phone=5493512876508&text=${message}&app_absent=0`;\n        form.reset();\n        window.open(url, \"_blank\", \"noopener,noreferrer\");\n    }\n}\n/*-\nhandleDESKWhatsapp :: (MouseEvent) -> undefined\n*/\nfunction handleDESKWhatsapp(e) {\n    const form = e.currentTarget.form;\n    if (canSend(form)) {\n        const message = createSendMessage(form, \"whatsapp\");\n        const url = `https://web.whatsapp.com/send/?phone=5493512876508&text=${message}&app_absent=0`;\n        form.reset();\n        window.open(url, \"_blank\", \"noopener,noreferrer\");\n    }\n}\n\ndocument.querySelectorAll(\".form\").forEach(function (form) {\n    form.addEventListener(\"submit\", function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    });\n    form.submit.addEventListener(\"click\", handleSubmit);\n});\n\ndocument.querySelectorAll(\".form .w-api\").forEach(function (button) {\n    button.addEventListener(\"click\", handleAPIWhatsapp);\n});\n\ndocument.querySelectorAll(\".form .w-desk\").forEach(function (button) {\n    button.addEventListener(\"click\", handleDESKWhatsapp);\n});\n\n\ndocument.querySelectorAll(\".delete\").forEach(function (button) {\n    button.addEventListener(\"click\", function (e) {\n        const modal = e.currentTarget.parentElement;\n        const modal_container = document.getElementById(\"modal\");\n        modal.classList.add(\"display-none\");\n        modal_container.classList.add(\"display-none\");\n        window.modal_state.modal = undefined;\n    });\n})"],"names":["modal_container_click","e","target","id","modal_container","document","getElementById","window","modal_state","modal","classList","add","undefined","setModalStatus","string","current_key_modal","current_modal","remove","toggle","addEventListener","once","createSendMessage","form","type","product","seguro","value","String","dataset","name","obj","Object","fromEntries","FormData","entries","_subject","location","href","nombre","apellido","_captcha","_template","str","forEach","key_val","isEmpty","isDNIOk","test","isTelOk","isCodigoPostalOk","isEmailOk","DNI_oninput","input","parentElement","oninput","tel_oninput","codigoPostal_oninput","email_oninput","empty_oninput","canSend","required","querySelectorAll","send","item","i","querySelector","handleSubmit","currentTarget","fetch","method","headers","body","JSON","stringify","then","response","json","data","success","Promise","reject","catch","reset","handleAPIWhatsapp","url","open","handleDESKWhatsapp","seal","preventDefault","stopPropagation","submit","button"],"sourceRoot":""}