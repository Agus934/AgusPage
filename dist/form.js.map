{"version":3,"file":"form.js","mappings":"MAUA,SAASA,EAAsBC,GAC3B,GAAoB,UAAhBA,EAAEC,OAAOC,GAAgB,CACzB,MAAMC,EAAkBH,EAAEC,OACZG,SAASC,eAAe,GAAGC,OAAOC,YAAYC,eACtDC,UAAUC,IAAI,gBACpBP,EAAgBM,UAAUC,IAAI,gBAC9BJ,OAAOC,YAAYC,WAAQG,CAC/B,CACJ,CAIA,SAASC,EAAeC,GACpB,MAAMC,EAAoBR,OAAOC,YAAYC,MACvCA,EAAQJ,SAASC,eAAe,GAAGQ,WACnCV,EAAkBC,SAASC,eAAe,SAC1CU,OACoBJ,IAAtBG,OACEH,EACAP,SAASC,eAAe,GAAGS,WAGjCX,EAAgBM,UAAUO,OAAO,gBACjCR,GAAOC,WAAWQ,OAAO,gBACzBF,GAAeN,WAAWQ,OAAO,gBACjCX,OAAOC,YAAYC,MAAQK,EAEZ,YAAXA,GACAV,EAAgBe,iBAAiB,QAASnB,EAAuB,CAACoB,MAAM,GAEhF,CAIA,SAASC,EAAkBC,EAAMC,GAC7B,MAAMC,EACU,eAAZF,EAAKnB,GACHmB,GAAMG,QAAQC,MACdC,OAAOL,EAAKM,QAAQC,MAE1B,GAAa,UAATN,EAAkB,CAClB,MAAMO,EAAMC,OAAOC,YAAY,IAAKC,SAASX,GAAOY,WAQpD,OAPAJ,EAAIK,SACY,aAAZb,EAAKnB,GACH,yBAAyBI,OAAO6B,SAASC,QACzC,qBAAqBb,mBAAyBF,EAAKgB,OAAOZ,SAASJ,EAAKiB,SAASb,QAEvFI,EAAIU,UAAW,EACfV,EAAIW,UAAY,QACTC,KAAKC,UAAUb,EAC1B,CAAO,GAAa,aAATP,EAAqB,CAC5B,IAAIqB,EAAM,iFACVA,GAAO,wCAAwCpB,OAC/CoB,GAAO,WAAWtB,EAAKgB,OAAOZ,WAAWJ,EAAKiB,SAASb,cAEvD,IAAK,MAAMmB,KAAW,IAAKZ,SAASX,GAAOY,UACvCU,GAAO,IAAIC,EAAQ,UAAUA,EAAQ,QAGzC,OAAOD,CACX,CACJ,CAKA,SAASE,EAAQhC,GACb,MAAkB,KAAXA,CACX,CA9EAP,OAAOC,YAAcuB,OAAOgB,KAAK,CAC7BtC,WAAOG,IA+EX,MAAMoC,EAAS,aAGf,SAASC,EAAQnC,GACb,MAAMoC,EAASpC,EAAOoC,OACtB,GAAIA,GAAU,GAAKA,GAAU,EAAG,CAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAQC,GAAK,EAC7B,IAAKH,EAAOI,SAAStC,EAAOqC,IACxB,OAAO,EAGf,OAAO,CACX,CACI,OAAO,CAEf,CAGA,MAAME,EAAiB,iBACjBC,EAAiB,0KACjBC,EAAiB,2yCAGvB,SAASC,EAAQ1C,GACb,OACIuC,EAAeI,KAAK3C,IACjBwC,EAAeG,KAAK3C,IACpByC,EAAeE,KAAK3C,EAE/B,CAEA,MAAM4C,EAAyB,mBAG/B,SAASC,EAAiB7C,GACtB,OAAO4C,EAAuBD,KAAK3C,EACvC,CACA,MAAM8C,EAAkB,uJAGxB,SAASC,EAAU/C,GACf,OAAO8C,EAAgBH,KAAK3C,EAChC,CAMA,SAASgD,EAAeC,GACPA,EAAMC,cAAcA,cAAcA,cAC1CtD,UAAUO,OAAO,cACtB8C,EAAME,QAAU,IACpB,CAIA,SAASC,EAAYjE,GACjB,MAAM8D,EAAQ9D,EAAEC,OACZ+C,EAAQc,EAAMrC,QACdoC,EAAeC,EAEvB,CAIA,SAASI,EAAYlE,GACjB,MAAM8D,EAAQ9D,EAAEC,OACZsD,EAAQO,EAAMrC,QACdoC,EAAeC,EAEvB,CAIA,SAASK,EAAqBnE,GAC1B,MAAM8D,EAAQ9D,EAAEC,OACZyD,EAAiBI,EAAMrC,QACvBoC,EAAeC,EAEvB,CAIA,SAASM,EAAcpE,GACnB,MAAM8D,EAAQ9D,EAAEC,OACZ2D,EAAUE,EAAMrC,QAChBoC,EAAeC,EAEvB,CAIA,SAASO,EAAcrE,GACnB,MAAM8D,EAAQ9D,EAAEC,OACX4C,EAAQiB,EAAMrC,QACfoC,EAAeC,EAEvB,CAqCA,SAASQ,EAAQjD,GACb,MAAMkD,EAAWlD,EAAKmD,iBAAiB,WACvC,IAAIC,GAAO,EACX,IAAK,MAAMC,KAAQH,EAAU,EAlCV,SAFHT,EAqCWY,EAAKC,cAAc,WAnCpC/C,MACFoB,EAAQc,EAAMrC,OAKH,QAAfqC,EAAMlC,MACF2B,EAAQO,EAAMrC,OAKH,kBAAfqC,EAAMlC,MACF8B,EAAiBI,EAAMrC,OAKZ,UAAfqC,EAAMlC,MACFgC,EAAUE,EAAMrC,OAIboB,EAAQiB,EAAMrC,SACrBqC,EAAME,QAAUK,EACT,IAJPP,EAAME,QAAUI,EACT,IAPPN,EAAME,QAAUG,EACT,IAPPL,EAAME,QAAUE,EACT,IAPPJ,EAAME,QAAUC,EACT,MAiCCQ,IACAA,GAAO,GAEXC,EAAKjE,UAAUC,IAAI,cAE3B,CA5CJ,IAAoBoD,EA6ChB,OAAOW,CACX,CAEA,SAASG,EAAqBC,GAC1B,OAAOA,EAASC,MACpB,CAEA,SAASC,EAAWC,GAChBC,QAAQC,KAAKF,GACbpE,EAAe,QACnB,CAEA,SAASuE,EAAaC,GAClB,MAAqB,SAAjBA,EAAKC,aACLzE,EAAe,WAGR0E,QAAQC,OAAOH,EAE9B,CACA,MAAMI,EAAY,iEAEZC,EAAgB,CAClBC,OAAQ,OACRC,QAAS,CACL,eAAgB,mBAChB,OAAU,oBAEdC,KAAM,IAKV,SAASC,EAAa7F,GAClB,MAAMqB,EAAOrB,EAAE8F,cAAczE,KACzBiD,EAAQjD,KACRT,EAAe,WACf6E,EAAcG,KAAOxE,EAAkBC,EAAM,SAEzC0E,MAAMP,EAAWC,GAChBO,KAAKpB,GACLoB,KAAKb,GACLc,MAAMlB,GAEZ1D,EAAK6E,QAEZ,CAIA,SAASC,EAAkBnG,GACvB,MAAMqB,EAAOrB,EAAE8F,cAAczE,KAC7B,GAAIiD,EAAQjD,GAAO,CACf,MACM+E,EAAM,2DADIhF,EAAkBC,EAAM,2BAExCA,EAAK6E,QACL5F,OAAO+F,KAAKD,EAAK,SAAU,sBAC/B,CACJ,CAIA,SAASE,EAAmBtG,GACxB,MAAMqB,EAAOrB,EAAE8F,cAAczE,KAC7B,GAAIiD,EAAQjD,GAAO,CACf,MACM+E,EAAM,2DADIhF,EAAkBC,EAAM,2BAExCA,EAAK6E,QACL5F,OAAO+F,KAAKD,EAAK,SAAU,sBAC/B,CACJ,CAKAhG,SAASoE,iBAAiB,SAAS+B,SAAQ,SAAUlF,GACjDA,EAAKH,iBAAiB,UAAU,SAAUlB,GACtCA,EAAEwG,iBACFxG,EAAEyG,iBACN,IACApF,EAAKqF,OAAOxF,iBAAiB,QAAS2E,EAC1C,IAEAzF,SAASoE,iBAAiB,gBAAgB+B,SAAQ,SAAUI,GACxDA,EAAOzF,iBAAiB,QAASiF,EACrC,IAEA/F,SAASoE,iBAAiB,iBAAiB+B,SAAQ,SAAUI,GACzDA,EAAOzF,iBAAiB,QAASoF,EACrC,IAEAlG,SAASoE,iBAAiB,WAAW+B,SAAQ,SAAUI,GACnDA,EAAOzF,iBAAiB,SAAS,SAAUlB,GACvC,MAAMQ,EAAQR,EAAE8F,cAAc/B,cACxB5D,EAAkBC,SAASC,eAAe,SAChDG,EAAMC,UAAUC,IAAI,gBACpBP,EAAgBM,UAAUC,IAAI,gBAC9BJ,OAAOC,YAAYC,WAAQG,CAC/B,GACJ,G","sources":["webpack://agustinagordillo-seguros-web/./src/js/form.js"],"sourcesContent":["window.modal_state = Object.seal({\n    modal: undefined,\n});\n\nfunction templateToString(_, ...args) {\n    return args.join(\"\");\n}\n\n/*-\nmodal_container_click :: (MouseEvent) -> undefined */\nfunction modal_container_click(e) {\n    if (e.target.id === \"modal\") {\n        const modal_container = e.target;\n        const modal = document.getElementById(`${window.modal_state.modal}-modal`);\n        modal.classList.add(\"display-none\");\n        modal_container.classList.add(\"display-none\");\n        window.modal_state.modal = undefined;\n    }\n}\n\n/*-\nsetModalStatus :: (\"error\" | \"loading\" | \"success\") -> undefined */\nfunction setModalStatus(string) {\n    const current_key_modal = window.modal_state.modal;\n    const modal = document.getElementById(`${string}-modal`);\n    const modal_container = document.getElementById(\"modal\");\n    const current_modal = (\n        current_key_modal === undefined\n        ? undefined\n        : document.getElementById(`${current_key_modal}-modal`)\n    );\n\n    modal_container.classList.remove(\"display-none\");\n    modal?.classList?.toggle(\"display-none\");\n    current_modal?.classList?.toggle(\"display-none\");\n    window.modal_state.modal = string;\n\n    if (string !== \"loading\") {\n        modal_container.addEventListener(\"click\", modal_container_click, {once: true});\n    }\n}\n\n/*-\ncreateSendMessage :: (HTMLFormElement, \"email\" | \"whatsapp\") -> string */\nfunction createSendMessage(form, type) {\n    const product = (\n        form.id === \"otros-form\"\n        ? form?.seguro?.value\n        : String(form.dataset.name)\n    );\n    if (type === \"email\") {\n        const obj = Object.fromEntries((new FormData(form)).entries());\n        obj._subject = (\n            form.id === 'Contacto'\n            ? `Consulta por parte de ${window.location.href}:`\n            : `Cotizar seguro de ${product}, por parte de ${form.nombre.value} ${form.apellido.value}`\n        );\n        obj._captcha = true;\n        obj._template = 'table';\n        return JSON.stringify(obj);\n    } else if (type === \"whatsapp\") {\n        let str = \"Hola,%20me%20comunico%20para%20consultarle%20la%20siguiente%20cotizaciÃ³n%0a%0a\";\n        str += `*_Asunto:*%20Cotizar%20seguro%20de%20${product}%0a`;\n        str += `*De:*%20${form.nombre.value}%20${form.apellido.value}%0a%0a`;\n\n        for (const element of (new FormData(form)).entries()) {\n            str += `*${element[0]}:*%20${element[1]}%0a`;\n        }\n\n        return str;\n    }\n}\n\n//ASSERT FUNCTIONS\n/*-\nisEmpty :: (string) -> boolean */\nfunction isEmpty(string) {\n    return string === \"\";\n}\n\nconst digits = \"0123456789\";\n/*-\nisDNIOk :: (string) -> boolean */\nfunction isDNIOk(string) {\n    const length = string.length;\n    if (length >= 6 && length <= 8) {\n        for (let i = 0; i < length; i += 1) {\n            if (!digits.includes(string[i])) {\n                return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n}\n\n\nconst isTelOkRegExp1 = /^11[ -]?\\d{8}$/;\nconst isTelOkRegExp2 = /^(?:220|221|223|230|236|237|249|260|261|263|264|266|280|291|294|297|298|299|336|341|342|343|345|348|351|353|358|362|364|370|376|379|380|381|383|385|387|388)[ -]?\\d{7}$/;\nconst isTelOkRegExp3 = /^(?:2202|2221|2223|2224|2225|2226|2227|2229|2241|2242|2243|2244|2245|2246|2252|2254|2255|2257|2261|2262|2264|2265|2266|2267|2268|2271|2272|2273|2274|2281|2283|2284|2285|2286|2291|2292|2296|2297|2302|2314|2316|2317|2320|2323|2324|2325|2326|2331|2333|2334|2335|2336|2337|2338|2342|2343|2344|2345|2346|2352|2353|2354|2355|2356|2357|2358|2392|2393|2394|2395|2396|2473|2474|2475|2477|2478|2622|2624|2625|2626|2646|2647|2648|2651|2655|2656|2657|2658|2901|2902|2903|2920|2921|2922|2923|2924|2925|2926|2927|2928|2929|2931|2932|2933|2934|2935|2936|2940|2942|2945|2946|2948|2952|2953|2954|2962|2963|2964|2966|2972|2982|2983|3327|3329|3382|3385|3387|3388|3400|3401|3402|3404|3405|3406|3407|3408|3409|3435|3436|3437|3438|3442|3444|3445|3446|3447|3454|3455|3456|3458|3460|3462|3463|3464|3465|3466|3467|3468|3469|3471|3472|3476|3482|3483|3487|3489|3491|3492|3493|3496|3497|3498|3521|3522|3524|3525|3532|3533|3537|3541|3542|3543|3544|3546|3547|3548|3549|3562|3563|3564|3571|3572|3573|3574|3575|3576|3582|3583|3584|3585|3711|3715|3716|3718|3721|3725|3731|3734|3735|3741|3743|3751|3754|3755|3756|3757|3758|3772|3773|3774|3775|3777|3781|3782|3786|3821|3825|3826|3827|3832|3835|3837|3838|3841|3843|3844|3845|3846|3854|3855|3856|3857|3858|3861|3862|3863|3865|3867|3868|3869|3873|3876|3877|3878|3885|3886|3887|3888|3891|3892|3894)[ -]?\\d{6}$/;\n/*-\nisTelOk :: (string) -> boolean */\nfunction isTelOk(string) {\n    return (\n        isTelOkRegExp1.test(string) \n        || isTelOkRegExp2.test(string) \n        || isTelOkRegExp3.test(string) \n    );\n}\n\nconst isCodigoPostalOkRegExp = /^[a-zA-Z]?\\d{4}$/;\n/*-\nisCodigoPostalOk :: (string) -> boolean */\nfunction isCodigoPostalOk(string) {\n    return isCodigoPostalOkRegExp.test(string);\n} \nconst isEmailOkRegExp = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/*-\nisEmailOk :: (string) -> boolean */\nfunction isEmailOk(string) {\n    return isEmailOkRegExp.test(string);\n}\n\n//EVENTS FUNCIONS\n\n/*\nsetItemToValid :: (HTMLDivElement) -> undefined */\nfunction setItemToValid(input) {\n    const item = input.parentElement.parentElement.parentElement;\n    item.classList.remove(\"is-invalid\");\n    input.oninput = null;\n}\n\n/*-\nDNI_oninput :: (Event) -> undefined */\nfunction DNI_oninput(e) {\n    const input = e.target;\n    if (isDNIOk(input.value)) {\n        setItemToValid(input);\n    }\n}\n\n/*-\ntel_oninput :: (Event) -> undefined */\nfunction tel_oninput(e) {\n    const input = e.target;\n    if (isTelOk(input.value)) {\n        setItemToValid(input);\n    }\n}\n\n/*-\ncodigoPostal_oninput :: (Event) -> undefined */\nfunction codigoPostal_oninput(e) {\n    const input = e.target;\n    if (isCodigoPostalOk(input.value)) {\n        setItemToValid(input);\n    }\n}\n\n/*-\nemail_oninput :: (Event) -> undefined */\nfunction email_oninput(e) {\n    const input = e.target;\n    if (isEmailOk(input.value)) {\n        setItemToValid(input);\n    }\n}\n\n/*-\nempty_oninput :: (Event) -> undefined */\nfunction empty_oninput(e) {\n    const input = e.target;\n    if (!isEmpty(input.value)) {\n        setItemToValid(input);\n    }\n}\n\n/*-\nisRequired :: (HTMLInputElement) -> boolean */\nfunction isRequired(input) {\n    if (\n        input.name === \"dni\"\n        && !isDNIOk(input.value)\n    ) {\n        input.oninput = DNI_oninput;\n        return true;\n    } else if (\n        input.name === \"tel\" \n        && !isTelOk(input.value)\n    ) {\n        input.oninput = tel_oninput;\n        return true;\n    } else if (\n        input.name === \"codigo_postal\" \n        && !isCodigoPostalOk(input.value)\n    ) {\n        input.oninput = codigoPostal_oninput;\n        return true;\n    } else if (\n        input.name === \"email\"\n        && !isEmailOk(input.value)\n    ) {\n        input.oninput = email_oninput;\n        return true;\n    } else if (isEmpty(input.value)) {\n        input.oninput = empty_oninput;\n        return true;\n    } else {\n        return false;\n    }\n}\n\nfunction canSend(form) {\n    const required = form.querySelectorAll(\".left_p\");\n    let send = true; \n    for (const item of required) {\n        const required_input = item.querySelector(\".input\");\n        if (isRequired(required_input)) {\n            if (send) {\n                send = false;\n            }\n            item.classList.add(\"is-invalid\");\n        }\n    }\n    return send;\n}\n\nfunction fetchResponseAObject(response) {\n    return response.json();\n}\n\nfunction fetchError(err) {\n    console.warn(err);\n    setModalStatus(\"error\");\n}\n\nfunction fetchSuccess(data) {\n    if (data.success === \"true\") {\n        setModalStatus(\"success\");\n        return;\n    } else {\n        return Promise.reject(data);\n    }\n}\nconst FETCH_URL = \"https://formsubmit.co/ajax/agustina.seguros.gordillo@gmail.com\";\n\nconst FETCH_OPTIONS = {\n    method: \"POST\",\n    headers: { \n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n    },\n    body: \"\"\n}\n\n/*-\nhandleSubmit :: (SubmitEvent) -> undefined */\nfunction handleSubmit(e) {\n    const form = e.currentTarget.form;\n    if (canSend(form)) {\n        setModalStatus(\"loading\");\n        FETCH_OPTIONS.body = createSendMessage(form, \"email\");\n        (\n            fetch(FETCH_URL, FETCH_OPTIONS)\n            .then(fetchResponseAObject)\n            .then(fetchSuccess)\n            .catch(fetchError)\n        )\n       form.reset();\n    }\n}\n\n/*-\nhandleAPIWhatsapp :: (MouseEvent) -> undefined */\nfunction handleAPIWhatsapp(e) {\n    const form = e.currentTarget.form;\n    if (canSend(form)) {\n        const message = createSendMessage(form, \"whatsapp\");\n        const url = `https://api.whatsapp.com/send/?phone=5493512876508&text=${message}&app_absent=0`;\n        form.reset();\n        window.open(url, \"_blank\", \"noopener,noreferrer\");\n    }\n}\n\n/*-\nhandleDESKWhatsapp :: (MouseEvent) -> undefined */\nfunction handleDESKWhatsapp(e) {\n    const form = e.currentTarget.form;\n    if (canSend(form)) {\n        const message = createSendMessage(form, \"whatsapp\");\n        const url = `https://web.whatsapp.com/send/?phone=5493512876508&text=${message}&app_absent=0`;\n        form.reset();\n        window.open(url, \"_blank\", \"noopener,noreferrer\");\n    }\n}\n\n\n\n\ndocument.querySelectorAll(\".form\").forEach(function (form) {\n    form.addEventListener(\"submit\", function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    });\n    form.submit.addEventListener(\"click\", handleSubmit);\n});\n\ndocument.querySelectorAll(\".form .w-api\").forEach(function (button) {\n    button.addEventListener(\"click\", handleAPIWhatsapp);\n});\n\ndocument.querySelectorAll(\".form .w-desk\").forEach(function (button) {\n    button.addEventListener(\"click\", handleDESKWhatsapp);\n});\n\ndocument.querySelectorAll(\".delete\").forEach(function (button) {\n    button.addEventListener(\"click\", function (e) {\n        const modal = e.currentTarget.parentElement;\n        const modal_container = document.getElementById(\"modal\");\n        modal.classList.add(\"display-none\");\n        modal_container.classList.add(\"display-none\");\n        window.modal_state.modal = undefined;\n    });\n})"],"names":["modal_container_click","e","target","id","modal_container","document","getElementById","window","modal_state","modal","classList","add","undefined","setModalStatus","string","current_key_modal","current_modal","remove","toggle","addEventListener","once","createSendMessage","form","type","product","seguro","value","String","dataset","name","obj","Object","fromEntries","FormData","entries","_subject","location","href","nombre","apellido","_captcha","_template","JSON","stringify","str","element","isEmpty","seal","digits","isDNIOk","length","i","includes","isTelOkRegExp1","isTelOkRegExp2","isTelOkRegExp3","isTelOk","test","isCodigoPostalOkRegExp","isCodigoPostalOk","isEmailOkRegExp","isEmailOk","setItemToValid","input","parentElement","oninput","DNI_oninput","tel_oninput","codigoPostal_oninput","email_oninput","empty_oninput","canSend","required","querySelectorAll","send","item","querySelector","fetchResponseAObject","response","json","fetchError","err","console","warn","fetchSuccess","data","success","Promise","reject","FETCH_URL","FETCH_OPTIONS","method","headers","body","handleSubmit","currentTarget","fetch","then","catch","reset","handleAPIWhatsapp","url","open","handleDESKWhatsapp","forEach","preventDefault","stopPropagation","submit","button"],"sourceRoot":""}